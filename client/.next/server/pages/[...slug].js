(()=>{var e={};e.id=330,e.ids=[330,888,660],e.modules={3961:(e,t,r)=>{"use strict";r.d(t,{Z:()=>i});var o=r(8219),n=r.n(o),s=r(997);let i=()=>(0,s.jsx)("div",{className:n().loadingContainer,children:(0,s.jsx)("div",{className:n().spinner})})},4410:(e,t,r)=>{"use strict";r.d(t,{H:()=>l,a:()=>c});var o=r(6689),n=r(1163),s=r(3053),i=r(997);let a=(0,o.createContext)(),l=({children:e})=>{let{0:t,1:r}=(0,o.useState)(null),{0:l,1:c}=(0,o.useState)(!0),u=(0,n.useRouter)(),p=async()=>{try{let e=(0,s.parseCookies)();if(!e.token){r(null),c(!1);return}let t=await fetch("http://localhost:5000/auth/session",{headers:{Authorization:`Bearer ${e.token}`},credentials:"include"});if(t.ok){let e=await t.json();r(e.user)}else(0,s.destroyCookie)(null,"token"),r(null)}catch(e){console.error("Check user error:",e),(0,s.destroyCookie)(null,"token"),r(null)}finally{c(!1)}};(0,o.useEffect)(()=>{p()},[]);let d=async e=>{try{let t=await fetch("http://localhost:5000/auth/login",{method:"POST",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify(e)}),o=await t.json();if(t.ok&&o.token)return(0,s.setCookie)(null,"token",o.token,{maxAge:2592e3,path:"/",secure:!0,sameSite:"lax"}),r(o.user),u.push("/blogging-platform/homepage"),{success:!0};return{success:!1,message:o.message}}catch(e){return console.error("Login error:",e),{success:!1,message:"Login failed"}}},g=async()=>{try{await fetch("http://localhost:5000/auth/logout",{method:"POST",credentials:"include"})}catch(e){console.error("Logout error:",e)}finally{(0,s.destroyCookie)(null,"token"),r(null),u.push("/login")}},f=async e=>{try{let t=(0,s.parseCookies)(),o=await fetch("http://localhost:5000/user/update",{method:"PUT",headers:{"Content-Type":"application/json",Authorization:`Bearer ${t.token}`},credentials:"include",body:JSON.stringify(e)}),n=await o.json();if(o.ok)return r(n.user),n.token&&(0,s.setCookie)(null,"token",n.token,{maxAge:2592e3,path:"/",secure:!0,sameSite:"strict"}),{success:!0,message:"Profile updated successfully"};return{success:!1,message:n.message||"Update failed"}}catch(e){return console.error("Profile update error:",e),{success:!1,message:"An error occurred while updating profile"}}};return(0,i.jsx)(a.Provider,{value:{user:t,login:d,logout:g,loading:l,updateUser:f},children:e})},c=()=>(0,o.useContext)(a)},4008:(e,t,r)=>{"use strict";r.d(t,{L:()=>u,U:()=>p});var o=r(6689),n=r(1163),s=r(4410),i=r(997);function a(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,o)}return r}function l(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?a(Object(r),!0).forEach(function(t){var o,n;o=t,n=r[t],(o=function(e){var t=function(e,t){if("object"!=typeof e||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var o=r.call(e,t||"default");if("object"!=typeof o)return o;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:String(t)}(o))in e?Object.defineProperty(e,o,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[o]=n}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):a(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}let c=(0,o.createContext)(),u=({children:e})=>{let{0:t,1:r}=(0,o.useState)([]),a=(0,n.useRouter)(),{user:u}=(0,s.a)(),p=async()=>{try{let e=await fetch("http://localhost:5000/blogs",{credentials:"include"});if(e.ok){let t=await e.json();r(t)}else r([])}catch(e){console.error("Fetch blogs error:",e)}};(0,o.useEffect)(()=>{!(a.pathname.includes("/login")||a.pathname.includes("/register"))&&u&&p()},[u,a.pathname]);let d=async e=>{try{let o=await fetch("http://localhost:5000/blogs",{method:"POST",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify(e)});if(o.ok){let e=await o.json();return r([...t,e]),{success:!0}}}catch(e){return console.error("Create blog error:",e),{success:!1}}},g=async(e,o)=>{try{let n=await fetch(`http://localhost:5000/blogs/${e}`,{method:"PUT",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify(o)});if(n.ok){let o=await n.json();return r(t.map(t=>t.id===e?o:t)),{success:!0}}}catch(e){return console.error("Update blog error:",e),{success:!1}}},f=async e=>{try{if((await fetch(`http://localhost:5000/blogs/${e}`,{method:"DELETE",credentials:"include"})).ok)return r(t=>t.filter(t=>t.id!==e)),{success:!0}}catch(e){return console.error("Delete blog error:",e),{success:!1}}};return(0,i.jsx)(c.Provider,{value:{blogs:t,createBlog:d,updateBlog:g,deleteBlog:f,updateBlogLikes:(e,t,o)=>{r(r=>Array.isArray(r)?r.map(r=>r.id===e?l(l({},r),{},{likeCount:t,isLiked:o}):r):(console.error("prevBlogs is not an array:",r),[]))},updateBlogComments:(e,t)=>{r(r=>r.map(r=>r.id===e?l(l({},r),{},{comments:t}):r))}},children:e})},p=()=>(0,o.useContext)(c)},5118:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>p});var o=r(4410),n=r(4008),s=r(1163),i=r(3053),a=r(6689);r(108);var l=r(997);function c(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,o)}return r}function u(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?c(Object(r),!0).forEach(function(t){var o,n;o=t,n=r[t],(o=function(e){var t=function(e,t){if("object"!=typeof e||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var o=r.call(e,t||"default");if("object"!=typeof o)return o;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:String(t)}(o))in e?Object.defineProperty(e,o,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[o]=n}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):c(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function p({Component:e,pageProps:t}){let r=(0,s.useRouter)(),c=["/blogging-platform/login","/blogging-platform/register"].includes(r.pathname);return(0,a.useEffect)(()=>{let e=!!(0,i.parseCookies)().token;if(console.log(e,"isAuthenticated"),console.log(c,"isAuthRoute"),console.log(r.pathname,"router.pathname"),e&&c){r.push("/blogging-platform/homepage");return}if(!e&&!c&&"/"!==r.pathname){r.push("/blogging-platform/login");return}},[r.pathname,c,r]),(0,l.jsx)(o.H,{children:c?(0,l.jsx)(e,u({},t)):(0,l.jsx)(n.L,{children:(0,l.jsx)(e,u({},t))})})}p.getInitialProps=async({Component:e,ctx:t})=>{let r={},o=!!(0,i.parseCookies)(t).token;return e.getInitialProps&&(r=await e.getInitialProps(t)),{pageProps:r,isAuthenticated:o}}},5571:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>s});var o=r(6859),n=r(997);function s(){return(0,n.jsxs)(o.Html,{lang:"en",children:[(0,n.jsx)(o.Head,{}),(0,n.jsxs)("body",{className:"antialiased",children:[(0,n.jsx)(o.Main,{}),(0,n.jsx)(o.NextScript,{})]})]})}},8219:e=>{e.exports={loadingContainer:"Loading_loadingContainer__s3hPe",spinner:"Loading_spinner__uD5wj",spin:"Loading_spin__p6qET"}},3137:(e,t,r)=>{"use strict";r.r(t),r.d(t,{config:()=>v,default:()=>m,getServerSideProps:()=>j,getStaticPaths:()=>y,getStaticProps:()=>b,reportWebVitals:()=>P,routeModule:()=>C,unstable_getServerProps:()=>k,unstable_getServerSideProps:()=>w,unstable_getStaticParams:()=>O,unstable_getStaticPaths:()=>x,unstable_getStaticProps:()=>S});var o={};r.r(o),r.d(o,{default:()=>h});var n=r(5872),s=r(3593),i=r(1323),a=r(5571),l=r(5118),c=r(1664),u=r.n(c),p=r(4410),d=r(6689),g=r(3961),f=r(997);let h=()=>{let{user:e}=(0,p.a)(),t={container:{display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",height:"100vh",textAlign:"center"},title:{fontSize:"2rem",marginBottom:"1rem"},link:{padding:"0.75rem 1.5rem",backgroundColor:"#3b82f6",color:"white",borderRadius:"0.375rem",textDecoration:"none",transition:"background-color 0.2s"}};return((0,d.useEffect)(()=>{if(!e)return},[e]),e)?(0,f.jsxs)("div",{style:t.container,children:[(0,f.jsx)("h1",{style:t.title,children:"404 - Page Not Found"}),(0,f.jsx)(u(),{href:"/blogging-platform/homepage",style:t.link,children:"Return to Home"})]}):(0,f.jsx)(g.Z,{})},m=(0,i.l)(o,"default"),b=(0,i.l)(o,"getStaticProps"),y=(0,i.l)(o,"getStaticPaths"),j=(0,i.l)(o,"getServerSideProps"),v=(0,i.l)(o,"config"),P=(0,i.l)(o,"reportWebVitals"),S=(0,i.l)(o,"unstable_getStaticProps"),x=(0,i.l)(o,"unstable_getStaticPaths"),O=(0,i.l)(o,"unstable_getStaticParams"),k=(0,i.l)(o,"unstable_getServerProps"),w=(0,i.l)(o,"unstable_getServerSideProps"),C=new n.PagesRouteModule({definition:{kind:s.x.PAGES,page:"/[...slug]",pathname:"/[...slug]",bundlePath:"",filename:""},components:{App:l.default,Document:a.default},userland:o})},108:()=>{},2785:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/pages.runtime.prod.js")},3053:e=>{"use strict";e.exports=require("nookies")},6689:e=>{"use strict";e.exports=require("react")},6405:e=>{"use strict";e.exports=require("react-dom")},997:e=>{"use strict";e.exports=require("react/jsx-runtime")},2048:e=>{"use strict";e.exports=require("fs")},5315:e=>{"use strict";e.exports=require("path")},6162:e=>{"use strict";e.exports=require("stream")},1568:e=>{"use strict";e.exports=require("zlib")}};var t=require("../webpack-runtime.js");t.C(e);var r=e=>t(t.s=e),o=t.X(0,[202,163,859,291],()=>r(3137));module.exports=o})();